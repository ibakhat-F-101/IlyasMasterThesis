- name: Generate a Random Password for "{{ password_variable }}"
  shell: diceware --num {{ number_of_words_in_password }} --no-caps --delimiter "-" --wordlist "en_eff"
  register: generated_password_for_service
  changed_when: false

- name: Replace "{{ password_variable }}" in Vault File
  replace:
    path: "{{ vault_file }}"
    regexp: '^{{ password_variable }}:.*$'
    replace: "{{ password_variable }}: {{ generated_password_for_service.stdout }}"
