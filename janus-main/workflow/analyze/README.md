# .DAST-CI.yml

- This file will create a pipeline, run the vagrant file into the runner
- Each ip with a service on the domain will be check
- If the service is running, we will have a DAST analyze with ZAP
- you can get the reports from the artifact from the pipeline

# .SAST-CI.yml

- You will need a server for your sonarqube instance with docker installed

Create a volume to persist sonarqube data

```
sudo docker volume create sonarqube_data
```

Run sonarqube in detached mode and using the volume

```
docker run -d -e SONAR_ES_BOOTSTRAP_CHECKS_DISABLE=true -p 9000:9000 --name janus_sast -v sonarqube_data:/opt/sonarqube/data sonarqube:latest
```

Stop cleanly the docker if needed

```
docker stop CONTAINER_ID
```

You can access to your sonarqube instance in :

In localhost

```
 http://localhost:9000
```

or

```
http://PUBLIC_IP:9000
```

Create an access token for the project with the read_api scope, [here](https://gitlab.com/jdosec/janus/-/settings/access_tokens)

```
settings > Access Tokens > Add new token
```

after that

```
In sonarqube > import from gitlab
```

Complete with these informations

```
name : JANUS
api : https://gitlab.com/api/v4
token : TOKEN_YOU_PREVIOUSLY_GENERATED
```

from the interface of sonarqube you will need to copy the value of 3 variables into gitlab CI/CD [variables](https://gitlab.com/jdosec/janus/-/settings/ci_cd) :

```
PROJECT_KEY : generated by sonarqube just copy/paste it
SERVER_IP : ip of your sonarqube server
SONAR_TOKEN : generate by sonarqube just copy/paste it
```
